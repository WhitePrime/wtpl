{"version":3,"file":"static/js/496.301e84a4.chunk.js","mappings":"uOAMe,SAASA,IACtB,IAAQC,GAA0BC,EAAAA,EAAAA,MAA1BD,sBAMR,OAJAE,EAAAA,EAAAA,YAAU,WACRC,QAAQC,IAAR,gBAAqBJ,MACpB,CAACA,KAGF,UAAC,IAAD,YACE,kCAEA,SAAC,IAAD,CAAkBK,UAAWL,S,uGCb7BM,EAAcC,EAAQ,MAwF5B,IAtFA,YAA0C,IAAdF,EAAa,EAAbA,UACpB,GAAkCG,EAAAA,EAAAA,UAAS,CAC3CC,gBAAiB,GACjBC,iBAAkB,GAClBC,YAAa,GACbC,gBAAiB,GACjBC,aAAc,GACdC,gBAAiB,EACjBC,qBAAsB,EACtBC,mBAAoB,IARxB,eAAKC,EAAL,KAAmBC,EAAnB,KA0DA,OA/CAhB,EAAAA,EAAAA,YAAU,WAEN,IACIiB,EAAS,IADIZ,EAAQ,OAGzBY,EAAOC,GAAG,SAAS,SAAAC,GACflB,QAAQC,IAAI,yBAA2BiB,EAAIC,YAG/CH,EAAOI,IAAIlB,GAAW,SAACmB,GACnB,IAAMC,EAAWC,aAAY,WAAO,IAAD,MAC/BR,EAAgB,CACZN,iBAAqC,IAAnBY,EAAQG,UAAgBC,QAAQ,GAAK,IACvDd,gBAAe,UAAEU,EAAQK,gBAAV,QAAsB,EACrCd,qBAAsBT,EAAW,UAACkB,EAAQM,qBAAT,QAA0B,GAAK,KAChEd,mBAAoBV,EAAW,UAACkB,EAAQO,mBAAT,QAAwB,GAAK,SAEjE,KAEHP,EAAQJ,GAAG,QAAQ,WACfF,EAAgB,CACZN,gBAAiB,SAErBT,QAAQC,IAAI,kBACZ4B,cAAcP,MAGlBP,EAAgB,CACZT,gBAAiBe,EAAQS,SACzBvB,iBAAkBc,EAAQU,UAC1BvB,YAAaa,EAAQW,KACrBtB,aAAcW,EAAQY,QAG1BjC,QAAQC,IAAIoB,EAAQY,OAGpB,IADA,IAAIC,EAAcb,EAAQY,MAAM,GACvBE,EAAI,EAAGA,EAAId,EAAQY,MAAMG,OAAQD,IAClCd,EAAQY,MAAME,GAAGC,OAASF,EAAYE,QAAUf,EAAQY,MAAME,GAAGH,KAAKK,SAAS,UAC/EH,EAAcb,EAAQY,MAAME,IAGpCD,EAAYI,SAAS,oBACrBtC,QAAQC,IAAIiC,QAEjB,CAAChC,KAGA,UAAC,IAAD,CAAWqC,OAAK,EAAhB,WACI,UAAC,IAAD,YACI,SAAC,IAAD,WACI,0BAAOzB,EAAaL,qBAExB,UAAC,IAAD,YACI,SAAC,IAAD,CAAiB+B,KAAMC,EAAAA,MAD3B,IACwC3B,EAAaH,gBADrD,aAGA,UAAC,IAAD,YACI,SAAC,IAAD,CAAiB6B,KAAME,EAAAA,MAD3B,IAC4C5B,EAAaF,yBAEzD,UAAC,IAAD,YACI,SAAC,IAAD,CAAiB4B,KAAMG,EAAAA,MAD3B,IAC0C7B,EAAaD,0BAG3D,SAAC,IAAD,WACI,SAAC,IAAD,WACI,kBAAO+B,GAAG,kBAAkBC,UAAU","sources":["Play.js","WebTorrentPlayer.js"],"sourcesContent":["\nimport React, { useEffect } from \"react\";\nimport { Container } from 'react-bootstrap';\nimport { useParams } from \"react-router-dom\";\nimport WebTorrentPlayer from \"./WebTorrentPlayer\";\n\nexport default function Play() {\n  const { magnet_or_torrent_url } = useParams();\n\n  useEffect(() => {\n    console.log(`Play: ${magnet_or_torrent_url}`);\n  }, [magnet_or_torrent_url]);\n\n  return (\n    <Container>\n      <h2>Play</h2>\n\n      <WebTorrentPlayer torrentId={magnet_or_torrent_url}></WebTorrentPlayer>\n    </Container>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUsers, faArrowUp, faArrowDown } from '@fortawesome/free-solid-svg-icons'\nimport { Col, Container, Row } from 'react-bootstrap';\nconst prettyBytes = require('pretty-bytes');\n\nfunction WebTorrentPlayer({ torrentId }) {\n    var [torrentState, setTorrentState] = useState({\n        torrentInfoHash: \"\",\n        torrentMagnetURI: \"\",\n        torrentName: \"\",\n        torrentProgress: \"\",\n        torrentFiles: [],\n        torrentNumPeers: 0,\n        torrentDownloadSpeed: 0,\n        torrentUploadSpeed: 0,\n      });\n\n    useEffect(() => {\n\n        var WebTorrent = require('webtorrent/webtorrent.min.js');\n        var client = new WebTorrent();\n\n        client.on('error', err => {\n            console.log('[+] Webtorrent error: ' + err.message);\n        });\n\n        client.add(torrentId, (torrent) => {\n            const interval = setInterval(() => {\n                setTorrentState({\n                    torrentProgress: (torrent.progress * 100).toFixed(1) + '%',\n                    torrentNumPeers: torrent.numPeers ?? 0,\n                    torrentDownloadSpeed: prettyBytes(torrent.downloadSpeed ?? 0) + '/s',\n                    torrentUploadSpeed: prettyBytes(torrent.uploadSpeed ?? 0) + '/s',\n                });\n            }, 500);\n\n            torrent.on('done', () => {\n                setTorrentState({\n                    torrentProgress: 100 + '%',\n                });\n                console.log('Progress: 100%');\n                clearInterval(interval);\n            })\n    \n            setTorrentState({\n                torrentInfoHash: torrent.infoHash,\n                torrentMagnetURI: torrent.magnetURI,\n                torrentName: torrent.name,\n                torrentFiles: torrent.files,\n            });\n\n            console.log(torrent.files);\n            // Find largest file\n            var largestFile = torrent.files[0]\n            for (var i = 1; i < torrent.files.length; i++) {\n                if (torrent.files[i].length > largestFile.length && torrent.files[i].name.endsWith('.mp4')) {\n                    largestFile = torrent.files[i]\n                }\n            }\n            largestFile.renderTo('#video-container');\n            console.log(largestFile);\n        });\n    }, [torrentId]);\n\n    return (\n        <Container fluid>\n            <Row>\n                <Col>\n                    <span>{torrentState.torrentProgress}</span>\n                </Col>\n                <Col>\n                    <FontAwesomeIcon icon={faUsers} /> {torrentState.torrentNumPeers} peers\n                </Col>\n                <Col>\n                    <FontAwesomeIcon icon={faArrowDown} /> {torrentState.torrentDownloadSpeed}\n                </Col>\n                <Col>\n                    <FontAwesomeIcon icon={faArrowUp} /> {torrentState.torrentUploadSpeed}\n                </Col>\n            </Row>\n            <Row>\n                <Col>\n                    <video id=\"video-container\" className=\"ratio ratio-16x9\">\n                        {/* <video id=\"player\"></video> */}\n                    </video>\n                </Col>\n            </Row>\n        </Container>\n    );\n}\n\nexport default WebTorrentPlayer;"],"names":["Play","magnet_or_torrent_url","useParams","useEffect","console","log","torrentId","prettyBytes","require","useState","torrentInfoHash","torrentMagnetURI","torrentName","torrentProgress","torrentFiles","torrentNumPeers","torrentDownloadSpeed","torrentUploadSpeed","torrentState","setTorrentState","client","on","err","message","add","torrent","interval","setInterval","progress","toFixed","numPeers","downloadSpeed","uploadSpeed","clearInterval","infoHash","magnetURI","name","files","largestFile","i","length","endsWith","renderTo","fluid","icon","faUsers","faArrowDown","faArrowUp","id","className"],"sourceRoot":""}